import{_ as n}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as s,c as a,f as e}from"./app-evcOSx1R.js";const t="/fe-blog/assets/mesh-Bxu08Pba.jpg",p={},o=e(`<h1 id="缓冲类几何体buffergeometry" tabindex="-1"><a class="header-anchor" href="#缓冲类几何体buffergeometry" aria-hidden="true">#</a> 缓冲类几何体BufferGeometry</h1><p>threejs的<strong>长方体BoxGeometry</strong>、<strong>球体SphereGeometry</strong>等几何体都是基于<strong>BufferGeometry类</strong>构建的，BufferGeometry是一个没有任何形状的<strong>空几何体</strong>，你可以通过BufferGeometry自定义任何几何形状，具体一点说就是定义顶点数据。</p><h2 id="创建空几何体对象" tabindex="-1"><a class="header-anchor" href="#创建空几何体对象" aria-hidden="true">#</a> 创建空几何体对象</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//创建一个空的几何体对象</span>
<span class="token keyword">const</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BufferGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="定义几何体顶点数据" tabindex="-1"><a class="header-anchor" href="#定义几何体顶点数据" aria-hidden="true">#</a> 定义几何体顶点数据</h2><p>通过javascript<strong>类型化数组Float32Array</strong>创建一组xyz坐标数据用来表示几何体的顶点坐标。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//类型化数组创建顶点数据</span>
<span class="token keyword">const</span> vertices <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//顶点1坐标</span>
    <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//顶点2坐标</span>
    <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//顶点3坐标</span>
    <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">//顶点4坐标</span>
    <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token comment">//顶点5坐标</span>
    <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">//顶点6坐标</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过threejs的属性缓冲区<strong>对象BufferAttribute</strong>表示threejs几何体顶点数据。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 创建属性缓冲区对象</span>
<span class="token comment">//3个为一组，表示一个顶点的xyz坐标</span>
<span class="token keyword">const</span> attribute <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BufferAttribute</span><span class="token punctuation">(</span>vertices<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="将顶点数据设置给空几何体" tabindex="-1"><a class="header-anchor" href="#将顶点数据设置给空几何体" aria-hidden="true">#</a> 将顶点数据设置给空几何体</h2><p>通过geometry.setAttribute设置几何体顶点位置属性的值BufferAttribute</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 设置几何体attributes属性的位置属性</span>
geometry<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;position&#39;</span><span class="token punctuation">,</span> attribute<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="点模型展示自定义几何体" tabindex="-1"><a class="header-anchor" href="#点模型展示自定义几何体" aria-hidden="true">#</a> 点模型展示自定义几何体</h2><p><strong>点模型Points</strong>和<strong>网格模型Mesh</strong>一样，都是threejs的一种模型对象，只是大部分情况下都是用Mesh表示物体。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 点渲染模式</span>
<span class="token keyword">const</span> material <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PointsMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xffff00</span><span class="token punctuation">,</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">10.0</span> <span class="token comment">//点对象像素尺寸</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token keyword">const</span> points <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Points</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span> material<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//点模型对象</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="线模型展示自定义几何体" tabindex="-1"><a class="header-anchor" href="#线模型展示自定义几何体" aria-hidden="true">#</a> 线模型展示自定义几何体</h2><p>下面代码是把几何体作为<strong>线模型Line</strong>的参数，你会发现渲染效果是从第一个点开始到最后一个点，依次连成线。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 线材质对象</span>
<span class="token keyword">const</span> material <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>LineBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xff0000</span> <span class="token comment">//线条颜色</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 创建线模型对象</span>
<span class="token keyword">const</span> line <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Line</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span> material<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>threejs线模型除了Line，还提供了<strong>LineLoop</strong>、<strong>LineSegments</strong>，区别在于绘制线条的规则：</p><ul><li>LineLoop 是首位相连的闭环线</li><li>LineSegments 是1-2，3-4连接的线段</li></ul><h2 id="自定义一个矩形几何体" tabindex="-1"><a class="header-anchor" href="#自定义一个矩形几何体" aria-hidden="true">#</a> 自定义一个矩形几何体</h2><h3 id="网格模型的三角形" tabindex="-1"><a class="header-anchor" href="#网格模型的三角形" aria-hidden="true">#</a> 网格模型的三角形</h3><p><strong>网格模型Mesh</strong>其实就一个一个三角形(面)拼接构成。使用网格模型Mesh渲染几何体geometry，就是几何体<em>所有顶点坐标三个为一组，构成一个三角形</em>，多组顶点构成多个三角形，就可以用来模拟表示物体的表面。</p><p>网格模型三角形：正反面</p><ul><li>正面：逆时针</li></ul><h3 id="矩形平面" tabindex="-1"><a class="header-anchor" href="#矩形平面" aria-hidden="true">#</a> 矩形平面</h3><figure><img src="`+t+`" alt="矩形几何体顶点坐标" tabindex="0" loading="lazy"><figcaption>矩形几何体顶点坐标</figcaption></figure><p>每个三角形3个顶点坐标，矩形平面可以拆分为两个三角形，也就是6个顶点坐标。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> vertices <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//顶点1坐标</span>
    <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//顶点2坐标</span>
    <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//顶点3坐标</span>

    <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//顶点4坐标   和顶点1位置相同</span>
    <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//顶点5坐标  和顶点3位置相同</span>
    <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//顶点6坐标</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过定义顶点索引，简化顶点数据（重复的顶点位置坐标删除）</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> vertices <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//顶点1坐标</span>
    <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//顶点2坐标</span>
    <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//顶点3坐标</span>
    <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//顶点4坐标</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Uint16Array类型数组创建顶点索引数据</span>
<span class="token keyword">const</span> indexes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint16Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token comment">// 下面索引值对应顶点位置数据中的顶点坐标</span>
    <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// 索引数据赋值给几何体的index属性</span>
geometry<span class="token punctuation">.</span><span class="token function">setIndex</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BufferAttribute</span><span class="token punctuation">(</span>indexes<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1个为一组</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过设置Mesh的wireframe为true可以看到对应的三角抛分。</p>`,32),c=[o];function l(i,u){return s(),a("div",null,c)}const d=n(p,[["render",l],["__file","BufferGeometry.html.vue"]]);export{d as default};
