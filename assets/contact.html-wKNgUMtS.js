const n=JSON.parse(`{"key":"v-4d6b86d3","path":"/posts/miniApp/contact.html","title":"小程序保存到通讯录","lang":"zh-CN","frontmatter":{"icon":"profile","date":"2022-01-05T00:00:00.000Z","category":["小程序"],"tag":["保存到通讯录"],"description":"小程序保存到通讯录 提示 官方文档 firstName是必传项 代码实现 /** * 保存到通讯录 */ saveMailList(){ wx.getSetting({ success (res) { // 先判断是否授权通讯录 if (res.authSetting[\\"scope.addPhoneContact\\"]){ wx.addPhoneContact({ firstName: 'xxxx', // firstName必传,不然报错 nickName: 'xx', mobilePhoneNumber: '123456', //手机号 success: function () { wx.showToast({title: '保存成功'}) } }) }else{ wx.addPhoneContact({ firstName: 'xxxx', // firstName必传,不然报错 nickName: 'xx', mobilePhoneNumber: '123456', //手机号 success: function () { wx.showToast({title: '保存成功'}) }, fail: function (err) { // wx.openSetting需要通过wx.showModal触发 // 用户拒绝授权才弹出, 取消不算 if(err.errMsg==\\"addPhoneContact:fail auth deny\\"){ wx.showModal({ title: '温馨提示', content: '需要获取您的通讯录权限', success: tip=&gt; {if (tip.confirm) {wx.openSetting()}} }) } } }); } } }) },","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/fe-blog/posts/miniApp/contact.html"}],["meta",{"property":"og:site_name","content":"Mr.He"}],["meta",{"property":"og:title","content":"小程序保存到通讯录"}],["meta",{"property":"og:description","content":"小程序保存到通讯录 提示 官方文档 firstName是必传项 代码实现 /** * 保存到通讯录 */ saveMailList(){ wx.getSetting({ success (res) { // 先判断是否授权通讯录 if (res.authSetting[\\"scope.addPhoneContact\\"]){ wx.addPhoneContact({ firstName: 'xxxx', // firstName必传,不然报错 nickName: 'xx', mobilePhoneNumber: '123456', //手机号 success: function () { wx.showToast({title: '保存成功'}) } }) }else{ wx.addPhoneContact({ firstName: 'xxxx', // firstName必传,不然报错 nickName: 'xx', mobilePhoneNumber: '123456', //手机号 success: function () { wx.showToast({title: '保存成功'}) }, fail: function (err) { // wx.openSetting需要通过wx.showModal触发 // 用户拒绝授权才弹出, 取消不算 if(err.errMsg==\\"addPhoneContact:fail auth deny\\"){ wx.showModal({ title: '温馨提示', content: '需要获取您的通讯录权限', success: tip=&gt; {if (tip.confirm) {wx.openSetting()}} }) } } }); } } }) },"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-01-23T07:30:29.000Z"}],["meta",{"property":"article:author","content":"Mr.He"}],["meta",{"property":"article:tag","content":"保存到通讯录"}],["meta",{"property":"article:published_time","content":"2022-01-05T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-01-23T07:30:29.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"小程序保存到通讯录\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-01-05T00:00:00.000Z\\",\\"dateModified\\":\\"2024-01-23T07:30:29.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.He\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"提示","slug":"提示","link":"#提示","children":[{"level":3,"title":"代码实现","slug":"代码实现","link":"#代码实现","children":[]}]}],"git":{"createdTime":1705995029000,"updatedTime":1705995029000,"contributors":[{"name":"何雪斌","email":"hexuebin@megvii.com","commits":1}]},"readingTime":{"minutes":0.6,"words":180},"filePathRelative":"posts/miniApp/contact.md","localizedDate":"2022年1月5日","excerpt":"<h1> 小程序保存到通讯录</h1>\\n<h2> 提示</h2>\\n<p><a href=\\"https://developers.weixin.qq.com/miniprogram/dev/api/device/contact/wx.addPhoneContact.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">官方文档</a></p>\\n<p><strong>firstName是必传项</strong></p>\\n<h3> 代码实现</h3>\\n<div class=\\"language-javascript line-numbers-mode\\" data-ext=\\"js\\"><pre class=\\"language-javascript\\"><code><span class=\\"token doc-comment comment\\">/**\\n  * 保存到通讯录\\n  */</span>\\n<span class=\\"token function\\">saveMailList</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">{</span>\\n    wx<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getSetting</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">success</span> <span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">res</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token comment\\">// 先判断是否授权通讯录</span>\\n            <span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span>res<span class=\\"token punctuation\\">.</span>authSetting<span class=\\"token punctuation\\">[</span><span class=\\"token string\\">\\"scope.addPhoneContact\\"</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">{</span>\\n                wx<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addPhoneContact</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span>\\n                    <span class=\\"token literal-property property\\">firstName</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">'xxxx'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token comment\\">// firstName必传,不然报错</span>\\n                    <span class=\\"token literal-property property\\">nickName</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">'xx'</span><span class=\\"token punctuation\\">,</span>\\n                    <span class=\\"token literal-property property\\">mobilePhoneNumber</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">'123456'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token comment\\">//手机号</span>\\n                    <span class=\\"token function-variable function\\">success</span><span class=\\"token operator\\">:</span> <span class=\\"token keyword\\">function</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n                        wx<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">showToast</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span><span class=\\"token literal-property property\\">title</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">'保存成功'</span><span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>\\n                    <span class=\\"token punctuation\\">}</span>\\n                <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>\\n            <span class=\\"token punctuation\\">}</span><span class=\\"token keyword\\">else</span><span class=\\"token punctuation\\">{</span>\\n                wx<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addPhoneContact</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span>\\n                    <span class=\\"token literal-property property\\">firstName</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">'xxxx'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token comment\\">// firstName必传,不然报错</span>\\n                    <span class=\\"token literal-property property\\">nickName</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">'xx'</span><span class=\\"token punctuation\\">,</span>\\n                    <span class=\\"token literal-property property\\">mobilePhoneNumber</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">'123456'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token comment\\">//手机号</span>\\n                    <span class=\\"token function-variable function\\">success</span><span class=\\"token operator\\">:</span> <span class=\\"token keyword\\">function</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n                        wx<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">showToast</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span><span class=\\"token literal-property property\\">title</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">'保存成功'</span><span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>\\n                    <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">,</span>\\n                    <span class=\\"token function-variable function\\">fail</span><span class=\\"token operator\\">:</span> <span class=\\"token keyword\\">function</span> <span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">err</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n                        <span class=\\"token comment\\">// wx.openSetting需要通过wx.showModal触发</span>\\n                        <span class=\\"token comment\\">// 用户拒绝授权才弹出, 取消不算</span>\\n                        <span class=\\"token keyword\\">if</span><span class=\\"token punctuation\\">(</span>err<span class=\\"token punctuation\\">.</span>errMsg<span class=\\"token operator\\">==</span><span class=\\"token string\\">\\"addPhoneContact:fail auth deny\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">{</span>\\n                            wx<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">showModal</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span>\\n                                <span class=\\"token literal-property property\\">title</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">'温馨提示'</span><span class=\\"token punctuation\\">,</span>\\n                                <span class=\\"token literal-property property\\">content</span><span class=\\"token operator\\">:</span> <span class=\\"token string\\">'需要获取您的通讯录权限'</span><span class=\\"token punctuation\\">,</span>\\n                                <span class=\\"token function-variable function\\">success</span><span class=\\"token operator\\">:</span> <span class=\\"token parameter\\">tip</span><span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span><span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span>tip<span class=\\"token punctuation\\">.</span>confirm<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>wx<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">openSetting</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">}</span>\\n                            <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>\\n                        <span class=\\"token punctuation\\">}</span>\\n                    <span class=\\"token punctuation\\">}</span>\\n                <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n            <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token punctuation\\">}</span>\\n    <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>  \\n<span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">,</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}`);export{n as data};
